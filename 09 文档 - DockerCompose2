Docker部署步骤：
一、构建centos-jdk镜像

二、构建mysql-java镜像

三、docker-compose（启动方式一）
1. 编写docker-compose.yml
version: '3.0'
services:
  eureka-server:      #自定义服务名
    image: weiji-eureka   #镜像名称
    ports:
      - "6001:6001"    #映射的端口
    networks:
      eureka-net:     #网络模式
        aliases:
          - eureka6001.com
    tty: true
    environment:       #环境变量配置
      - TZ=Asia/Shanghai
  config:
    image: weiji-config
    ports:
      - "6501:6501"
    networks:
      eureka-net:
        aliases:
          - weiji-config
    tty: true
    # http://config6501.com:6501/config/weiji-eureka-dev.yml 试着判断config是否可以访问
    entrypoint: /entrypoint.sh -d eureka6001.com:6001 -c 'java -Djava.security.egd=file:/dev/./urandom -jar /app.jar';
    environment:
      - TZ=Asia/Shanghai
  weiji-customer:
    image: weiji-customer
    ports:
      - "7001:7001"
    networks:
      eureka-net:
        aliases:
          - weiji-customer
    tty: true
    entrypoint: /entrypoint.sh -d eureka6001.com:6001 -c 'java -Djava.security.egd=file:/dev/./urandom -jar /app.jar';
    environment:
      - TZ=Asia/Shanghai
  weiji-service:
    image: weiji-service
    ports:
      - "8002:8002"
    networks:
      eureka-net:
        aliases:
          - weiji-service
    tty: true
    entrypoint: /entrypoint.sh -d eureka6001.com:6001 -c 'java -Djava.security.egd=file:/dev/./urandom -jar /app.jar';
    environment:
      - TZ=Asia/Shanghai
  weiji-service2:
    image: weiji-service
    ports:
      - "8003:8002"
    networks:
      eureka-net:
        aliases:
          - weiji-service
    tty: true
    entrypoint: /entrypoint.sh -d eureka6001.com:6001 -c 'java -Djava.security.egd=file:/dev/./urandom -jar /app.jar';
    environment:
      - TZ=Asia/Shanghai
  weiji-order:
    image: weiji-order
    ports:
      - "8012:8012"
    networks:
      eureka-net:
        aliases:
          - weiji-order
    tty: true
    entrypoint: /entrypoint.sh -d eureka6001.com:6001 -c 'java -Djava.security.egd=file:/dev/./urandom -jar /app.jar';
    environment:
      - TZ=Asia/Shanghai
  nginx-server1:
    image: nginx
    ports:
      - "80:80"
    networks:
      eureka-net:
        aliases:
          - nnnnnnnnnnnnnnnn
    volumes:
      - /etc/yum.repos.d/:/etc/yum.repos.d/
    environment:
      - TZ=Asia/Shanghai
networks:
  eureka-net:
#     driver: bridge

2. 执行docker-compose.yml
docker-compose -f docker-compose.yml up -d

四、 手动逐一启动（启动方式二）
1. 创建网桥
docker network create default_network
docker network  ls
2. 启动项目
docker run -d --name config -p 6501:6501 --network eureka-net --network-alias config6501.com 7d3a880c29cb
docker run -d --name eureka -p 6001:6001 --network eureka-net --network-alias eureka6001.com c39ac97db077
docker ps
docker logs --since 2020-07-17T11:06 7c

五、查看eureka日志（eureka要等待config启动结束处于监听状态时，端口是通的，再启动，如果eureka没报错，则config和eureka均启动成功）
docker ps
docker logs --since 2020-07-26T21:51:00 0c4acd9c207a
或
docker inspect --format '{{.LogPath}}' mysql-java
cat ...




项目重新打包
docker rmi weiji-customer
docker rmi weiji-service
docker rmi weiji-order
docker rmi weiji-config
docker rmi weiji-eureka




